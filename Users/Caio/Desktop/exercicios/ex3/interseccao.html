<meta charset="UTF-8">
<html>
 <head>
    <title>Me contrata :)</title>
    <style>
       canvas{
         position: absolute;
         top: 0px;
         bottom: 0px;
         left: 0px;
         right: 0px;
         margin: auto;

       }
    </style>
 </head>
 <body>
 	<center>
 		<h1>Calcular area de intersecção</h1>
 		<label>retangulo 1 x || retangulo 2 x   </label><br>
 		<input type="text" id="ret1_x" value="30"><input type="text" id="ret2_x" value="50"><br>
 		<label>retangulo 1 y || retangulo 2 y  </label><br>
 		<input type="text" id="ret1_y"><input type="text" id="ret2_y"><br>
 		<label>largura 1 x || largura 2 x  </label><br>
 		<input type="text" id="ret1_x1"><input type="text" id="ret2_x1"><br>
 		<label>altura 1 y || altura y x  </label><br>
 		<input type="text" id="ret1_y1"><input type="text" id="ret2_y1"><br>
 		<button id="cria">Criar Retangulos</button>
 	</center>
 </body>
  <script type="text/javascript">

   var canvas;
   var ctx;
   var ALTURA;
   var LARGURA;
   var button = document.getElementById('cria');

 

   var retangulo1 = {
      		x:0,
      		y:0,
      		largura:0,
      		altura:0,
      		cor: "white",
      		desenha: function(){
            	ctx.fillStyle = this.cor;
            	ctx.fillRect(this.x, this.y, this.largura, this.altura);
      		}
      	};

    var retangulo2 = {
      		x:0,
      		y:0,
      		largura:0,
      		altura:0,
      		cor: "white",
      		desenha: function(){
            	ctx.fillStyle = this.cor;
            	ctx.fillRect(this.x, this.y, this.largura, this.altura);
      		}
      	};

    var retangulo3 = {
            x:0,
            y:0,
            largura:0,
            altura:0,
            cor: "white",
            desenha: function(){
               ctx.fillStyle = this.cor;
               ctx.fillRect(this.x, this.y, this.largura, this.altura);
            }
         };

   button.addEventListener('click',criaQuadrado);

   function criaQuadrado(){
   	  	var retangulo1_x = document.getElementById("ret1_x").value;
   		var retangulo1_y = document.getElementById("ret1_y").value;
   		var retangulo1_x1 = document.getElementById("ret1_x1").value;
   		var retangulo1_y1 = document.getElementById("ret1_y1").value;

   		var retangulo2_x = document.getElementById("ret2_x").value;
   		var retangulo2_y = document.getElementById("ret2_y").value;
   		var retangulo2_x1 = document.getElementById("ret2_x1").value;
   		var retangulo2_y1 = document.getElementById("ret2_y1").value;

   		retangulo1.x = retangulo1_x;
   		retangulo1.y = retangulo1_y;
   		retangulo1.largura = retangulo1_x1;
   		retangulo1.altura = retangulo1_y1;
   		retangulo1.cor = "blue";

   		retangulo2.x = retangulo2_x;
   		retangulo2.y = retangulo2_y;
   		retangulo2.largura = retangulo2_x1;
   		retangulo2.altura = retangulo2_y1;
   		retangulo2.cor = "red";
   }

    function verifica_colisao(){
      retangulo2.x = parseInt(retangulo2.x);
      retangulo2.y = parseInt(retangulo2.y);
      retangulo2.altura = parseInt(retangulo2.altura);
      retangulo2.largura = parseInt(retangulo2.largura);
      retangulo1.x = parseInt(retangulo1.x);
      retangulo1.y = parseInt(retangulo1.y);
      retangulo1.altura = parseInt(retangulo1.altura);
      retangulo1.largura = parseInt(retangulo1.largura);

         if (retangulo1.x < retangulo2.x + retangulo2.largura &&
            retangulo1.x + retangulo1.largura > retangulo2.x &&
            retangulo1.y < retangulo2.y + retangulo2.altura &&
            retangulo1.y + retangulo1.altura > retangulo2.y) {
            return true;
      }else{
         return false;
      }

   }

   
   
  
   var x = document.createElement("h1");
   document.body.appendChild(x);
   
   function main(){
      ALTURA = 300;
      LARGURA = 730;
      canvas = document.createElement("canvas");
      canvas.width = LARGURA;
      canvas.height = ALTURA;
      
      canvas.style.border = "solid 1px black";
      ctx = canvas.getContext("2d");
      document.body.appendChild(canvas);
      var button_interseccao = document.createElement('button');
      button_interseccao.addEventListener('click',calcula);
      button_interseccao.innerText = "Calcular area de Intersecção!";
      document.body.appendChild(button_interseccao);

      roda();
      
  
   }
   function calcula(){
      retangulo2.x = parseInt(retangulo2.x);
      retangulo2.y = parseInt(retangulo2.y);
      retangulo2.altura = parseInt(retangulo2.altura);
      retangulo2.largura = parseInt(retangulo2.largura);
      retangulo1.x = parseInt(retangulo1.x);
      retangulo1.y = parseInt(retangulo1.y);
      retangulo1.altura = parseInt(retangulo1.altura);
      retangulo1.largura = parseInt(retangulo1.largura);
      if(verifica_colisao){
         retangulo3.x = retangulo2.x;
         retangulo3.y = retangulo2.y;
         retangulo3.largura = ((retangulo1.largura + retangulo1.x) - retangulo2.x);
         retangulo3.altura = ((retangulo1.y + retangulo1.altura) - retangulo2.y);
         retangulo3.cor = "green";
      }
   }

   main();
   

   var cont = 0;
   function roda(){
   	  cont++;
      ctx.fillStyle = "white";
      ctx.fillRect(0,0,LARGURA,ALTURA);
      
      retangulo1.desenha();
      retangulo2.desenha();
      retangulo3.desenha();
      if(cont == 1000){
      	   
      	   cont = 0;
      }

      window.requestAnimationFrame(roda);
   }
 </script>
</html>
